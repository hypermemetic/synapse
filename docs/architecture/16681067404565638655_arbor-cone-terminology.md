# Terminology: Arbor, Cone, Dendrite

## The Neural Growth Metaphor

The substrate's tree-based conversation system maps onto neural growth:

```
┌─────────────────────────────────────────────────────────────────┐
│                         CLIENT                                   │
│  The actual agent - makes decisions, directs growth             │
└──────────────────────────────┬──────────────────────────────────┘
                               │ JSON-RPC WebSocket
┌──────────────────────────────▼──────────────────────────────────┐
│                         PLEXUS                                   │
│  Nerve center: routes calls, coordinates activations            │
│                                                                  │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐           │
│  │  Arbor   │ │   Cone   │ │   Bash   │ │  Health  │           │
│  │          │ │          │ │          │ │          │           │
│  │  tree    │ │  growth  │ │  shell   │ │  status  │           │
│  │ storage  │ │ explorer │ │execution │ │  check   │           │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘           │
└─────────────────────────────────────────────────────────────────┘
```

## Terminology

### Arbor

Latin for **tree**. The branching structure that stores conversation topology.

From neuroscience: the **dendritic arbor** is the full branching pattern of a neuron's input structures.

In substrate, Arbor provides:
- Tree creation and management
- Node operations (create, get, traverse)
- Context path resolution
- Ownership and lifecycle management

```rust
let arbor = Arbor::new(config).await?;

// Create tree structure
let tree_id = arbor.tree_create(metadata, owner_id).await?;
let node_id = arbor.node_create_text(&tree_id, parent, content, metadata).await?;

// Traverse
let path = arbor.context_get_path(&tree_id, &node_id).await?;
```

The arbor is **passive storage**. It doesn't decide what to add—it holds what has been added.

### Cone

The **growth cone** in neuroscience is the dynamic, exploring tip of a growing nerve fiber. It:
- Senses the environment
- Probes possible directions
- Extends the fiber into new territory

In substrate, Cone provides:
- Context resolution (reading the environment)
- LLM inference (probing directions)
- Response generation and storage (extending)
- Head position management

```rust
let cone = Cone::new(config).await?;

// The cone explores: reads context, calls LLM, extends arbor
let stream = cone.chat(cone_id, prompt).await?;
```

The cone is the **growth machinery**. It doesn't decide *what* to explore—the client (real agent) directs it. The cone provides the capability to sense context and extend.

### Dendrite

From Greek **dendron** (tree). In neuroscience, dendrites are the branching input structures that receive signals.

In substrate, a dendrite is **conceptual**—it's the path from root to a node (the context window). Not a separate type, but what you get when you traverse an arbor:

```rust
// The dendrite is the path—the realized context
let dendrite: Vec<Node> = arbor.context_get_path(&tree_id, &head).await?;

// Resolving a dendrite gives you the conversation history
let messages = resolve_dendrite_to_messages(&dendrite).await?;
```

The dendrite represents **realized history**—one specific path through the arbor's possibility space.

### Position

Couples `tree_id` and `node_id` together. Represents where a cone's "head" is in an arbor.

```rust
pub struct Position {
    pub tree_id: TreeId,
    pub node_id: NodeId,
}

impl Position {
    pub fn advance(&self, new_node_id: NodeId) -> Position {
        Position {
            tree_id: self.tree_id,
            node_id: new_node_id,
        }
    }
}
```

## The Growth Process

```
1. Client decides to extend (the real agent)
        │
        ▼
2. Cone reads context from Arbor
   (growth cone senses environment)
        │
        ▼
3. Cone resolves handles to content
   (dendrite → messages)
        │
        ▼
4. Cone calls LLM with context
   (probing possible directions)
        │
        ▼
5. Cone stores response, creates node in Arbor
   (extending the fiber)
        │
        ▼
6. Cone advances head Position
   (growth cone moves forward)
        │
        ▼
7. Client receives response, decides next action
```

## Operations Beyond the Metaphor

Some operations don't map cleanly to neural growth:

| Operation | Description | Term |
|-----------|-------------|------|
| Collapse subtree to summary | Compress history | **Pruning** (acceptable - neurons prune too) |
| Clone subtree | Branch from existing | **Grafting** (botanical, but fits) |
| Move head backward | Revisit earlier state | **Retraction** |
| Delete tree | Remove entirely | **Ablation** (surgical removal) |

## Directory Structure

```
substrate/src/
├── plexus/
│   ├── plexus.rs      # Plexus struct, Activation trait
│   ├── path.rs        # Provenance type
│   └── types.rs       # PlexusStreamItem
├── activations/
│   ├── arbor/         # Tree storage (was: loom/)
│   │   ├── activation.rs
│   │   ├── storage.rs
│   │   └── types.rs
│   ├── cone/          # Growth/exploration (was: agent/)
│   │   ├── activation.rs
│   │   ├── storage.rs
│   │   └── types.rs
│   ├── bash/
│   └── health/
└── plugin_system/
```

## Why These Names

### Why "Arbor" not "Tree" or "Loom"

- **Tree** is overloaded (data structure, file tree, DOM tree)
- **Loom** was evocative but didn't connect to the neural metaphor
- **Arbor** is precise: the branching structure, used in "dendritic arbor"

### Why "Cone" not "Agent" or "Neuron"

- **Agent** implies decision-making; the client is the real agent
- **Neuron** is the whole cell; we're just the growth tip
- **Cone** (growth cone) captures the exploring/extending capability without implying agency

### Why "Dendrite" as concept not type

- The dendrite is a **view** of the arbor—a specific path
- It's what `context_get_path` returns
- No need for a separate type; it's `Vec<Node>` interpreted as context

## Theoretical Context

This maps to the SST-inspired architecture:

```
Client Layer (SST agents in future)
    Decision-making, strategy, time horizons
              ↓ directs
Plexus Layer
    Arbor: stores possibility space (all branches)
    Cone: extends on command (growth machinery)
              ↓ realizes
Dendrite (conceptual)
    The specific path taken through the arbor
    The context window for any given operation
```

The arbor holds all possibilities. The dendrite is one realized path. The cone is how you extend that path. The client decides *when* and *where* to extend.
